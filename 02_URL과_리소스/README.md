# 2. URL과 리소스

**다룰 내용들**

- URL 문법과 URL 컴포넌트의 의미, 수행
- 상대 URL과 확장 URL 같은 단축 URL
- URL의 인코딩, 문자 규칙
- 공통 URL 스킴
- URN을 포함한 URL의 미래

## 2.1 인터넷 리소스 탐색하기

**URL: URI(통합 자원 식별자)의 일반화된 부류의 부분집합**

- 브라우저가 정보를 찾는데 필요한 리소스의 위치
- 이를 통해 클라이언트와 서버가 수 많은 리소스 공유 가능
- URI의 대부분을 차지

```
http://www.tangerine-heel.com/mukyojeong/index.html

1. http
2. www.tangerine-heel.com
3. /mukyojeong/index.html
```

1. 스킴, 스킴은 클라이언트가 리소스에 접근하는 방법을 명시, http, ftp 등의 프로토콜 사용
2. 호스트, 서버의 위치로 리소스가 어디에 호스팅 되어있는지를 의미
3. 경로, 리소스가 호스트의 어디에 위치하는 지를 의미

### 2.1.1 URL이 있기 전 암흑의 시대

URL이 등장하기 전 서버의 파일에 접근하려면 애플리케이션 별 가지각색의 방법을 사용해 접근해야 했음

⇒ 하나의 인터페이스를 통해 일관된 방식인 URL이 등장

이를 통해 파일 공유를 통해 FTP 클라이언트를 사용하고, 메일 송수신을 위해 전자메일 프로그램을 사용하는 것 등의 필요를 제거

일반적으로 브라우저를 통해 리소스에 쉽게 접근 가능하게 함.

## 2.2 URL 문법

```
<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/경로;<파라미터>?<질의>#<프래그먼트>
```

`<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/경로;<파라미터>?<질의>#<프래그먼트>`

| 컴포넌트 | 설명 | 기본값 |
| --- | --- | --- |
| 스킴 | 리소스를 가져오기 위해 사용하는 프로토콜 | 없음 |
| 사용자 이름 | 리소스에 접근하는 사용자의 이름 | anonymous |
| 비밀번호 | 사용자의 비밀번호로 이름 뒤에 콜론(:)으로 표시 | <이메일 주소> |
| 호스트 | 리소스를 호스팅하는 서버의 호스트 명 or IP 주소 | 없음 |
| 포트 | 리소스를 호스팅하는 서버가 열어놓은 포트 번호, HTTp의 기본 포트는 80 | 스킴에 따라 다름 |
| 경로 | 리소스가 서버 내의 어디에 위치하는 지를 가리킴 | 없음 |
| 파라미터 | 입력 파라미터를 기술하는 용도, 이름/값의 쌍을 가짐, 세미콜론(;)로 구분 | 없음 |
| 쿼리 | 파라미터를 전달하는데 사용, URL 끝에 ‘?’로 구분 | 없음 |
| 프래그먼트 | 리소스의 일부, 조각을 가리킴 | 없음 |

### 2.2.1 스킴: 사용할 프로토콜

URL을 해석하는 애플리케이션이 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지를 가리킴.

### 2.2.2 호스트와 포트

호스트: 접근하려고 하는 리소스를 가지고 있는 인터넷 상의 호스트 장비를 가리킴.

포트: 서버가 열어놓은 네트워크 포트

기본적으로 HTTP 는 80번 사용

### 2.2.3 사용자 이름과 비밀번호

서버의 리소스에 접근하기 전 이름과 비밀번호로 권한 확인

### 2.2.4 경로

리소스가 서버의 어디에 있는지를 가리킴. 유닉스의 파일 시스템의 파일 경로와 유사

/를 기준으로 경로조각으로 나뉨, 각 경로조각마다 파라미터를 가질 수 있음.

### 2.2.5 파라미터

서버에 정확한 요청을 하기 위해 필요한 입력을 파라미터로 받는데 사용

이름/값의 형태의 리스트로 사용하며 ‘;’로 구분

### 2.2.6 질의 문자열

요청받을 리소스 형식의 범위를 좁히기 위해 사용됨.

물음표 뒤에 ‘이름=값’의 형태로 많이 사용됨.

### 2.2.6 프래그먼트

리소스 내의 조각을 가리켜 보고 싶은 일부만 볼 수 있게 함.

## 2.3 단축 URL

### 2.3.1 상대 URL

URL은 크게 상대 URL과 절대 URL로 나뉘는데, 절대 URL은 리소스에 접근하는데 필요한 모든 정보가 담김.

반면 상대 URL은 모든 정보를 담고 있지 않는 형태로 짧게 URL를 표기

⇒기저(base) URL을 사용해 접근해야 함

**http://www.tangerine-heel.com/index.html**

```html
...
<a href="./login.html">
...
```

이라고 한다면 기저 URL은 [http://www.tangerine-heel.com/index.html](http://www.tangerine-heel.com/index.html이) 이 되며, 기저 URL을 통해 ./login.html이 가리키는 곳이 [http://www.tangerine-heel.com/login.html](http://www.tangerine-heel.com/login.html임을)  임을 알 수 있음.

**사용하는 이유**

- 리소스 집합을 쉽게 변경 가능
- 문서 집합의 위치를 변경해도 새로운 URL에 의해 해석되기 때문에 잘 동작

**기저 URL 찾는 방법**

- 리소스에 명시적으로 제공
    
    <BASE>와 같은 HTML xorm rltnf rksmd
    
- 해당 리소스의 URL을 사용
    
    앞선 예(index.html, login.html)와 같이 사용
    
- 두 가지 방법이 불가능 한 경우는 대체로 불완전하거나 깨진 URL

**상대 URL을 절대 URL로 변경**

![HTTP_URL](./assets/HTTP_URL.png)

### 2.3.2 URL 확장

**호스트 명 확장**

- 브라우저는 단순한 휴리스틱을 사용해 입력한 호스트 명을 전체 호스트 명으로 확장
    
    ex) tangerine-heel 입력시 www.와 .com을 붙여 [www.tangerine-heel.com](http://www.tangerine-heel.com) 으로 확장
    
    찾지 못하면 추가적으로 몇 가지 URL 제시
    

**히스토리 확장**

- 과거에 방문했던 URL을 기반으로 자동완성

## 2.4 안전하지 않은 문자

URL은 잘 호환될 수 있도록 설계됨

⇒다양한 프로토콜을 통해 데이터를 전송할 때 안전하게 설계하는 것이 중요

### 2.4.1 URL 문자 집합

오래된 문자 집합으로 적은 수의 문자만 포함하는 US-ASCII를 보완하기 위해 이스케이프 문자열을 사용할 수 있도록 설계해 특정 문자나 데이터를 인코딩할 수 있게 함으로 이동성과 완성도 높임

### 2.4.2 인코딩 체계

안전하지 않은 문자를 퍼센티지 기호(%)로 시작해 ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어진 ‘이스케이프’문자로 변경시켜줌

ex) 빈 문자의 경우 ASCII 코드32(0x20)으로 www.tangerine-heel.com/hi%20hello.html

### 2.4.3 문자 제한

URL에 예약된 문자들은 인코딩을 통해 사용되어야 함.

ex) %, /, ., .., #, ?, ;, :, $, +, @, &, =, {} 등

### 2.4.4 좀 더 알아보기

애플리케이션에서 URL을 사용할 때 적절하게 인코딩해서 사용해야 함.

## 2.5 스킴의 바다

일반적으로 많이 사용되는 스킴

- http
- https
- mailto
- ftp
- rtsp, rtspu
- file
- news
- telnet

## 2.6 미래

URL은 완벽하다 볼 수 없는데, 그 이유는 리소스가 옮겨지면 더 이상 사용할 수 없기 때문

이상적인 방법은 객체의 이름을 사용하는 것, 따라서 위치가 변경되더라도 이름을 통해 리소스를 사용 가능하게 하는 것 ⇒ **URN**

지속 통합 자원 지시자 PURL을 사용하면 URL로 URN의 기능 제공할 수 있음.

⇒ 리소스의 실제 URL 목록을 관리하고 추적하는 중개 서버를 두고 해당 리소스를 우회적으로 제공

### 2.6.1 지금이 아니면 언제?

한동안 사용이 되었지만, 위처럼 URL에서 URN으로 바꾸는 것에는 많은 작업이 필요로 하기 때문에 어려울 것으로 보이며, 추후 대체할 수 있는 방안이 나온다면 표준인 세워지고 적용될 것으로 보임
